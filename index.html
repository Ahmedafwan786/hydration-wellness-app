<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hydration & Wellness Reminder</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3498db"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: white;
      text-align: center;
      padding: 20px;
    }
    h1 { color: #ffffff; text-shadow: 1px 1px 3px #000000; }
    .card {
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      margin: 15px auto;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      max-width: 450px;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      background: #3498db;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover { background: #2980b9; }
    input, select { padding: 8px; margin: 5px; border-radius: 8px; border: 1px solid #ccc; width: 80%; }
    #teamList { list-style-type: none; padding: 0; font-size: 18px; }
    #teamList li { margin: 8px 0; display: flex; align-items: center; }
    #teamList li::before { content: "ðŸ‘¤"; margin-right: 10px; }
    .card-header { background-color: #3498db; color: white; padding: 10px; border-radius: 10px 10px 0 0; margin: -20px -20px 15px -20px; font-size: 20px; }
    a { color: #ffcc00; text-decoration: none; font-weight: bold; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>ðŸ’§ Hydration & Wellness Reminder</h1>

  <div class="card">
    <div class="card-header">Hydration Tracker</div>
    <canvas id="hydrationChart" width="200" height="200"></canvas>
    <p id="progress">Glasses Drank: 0 / 8</p>
    <button onclick="addGlass()">+ Add Glass</button>
  </div>

  <div class="card">
    <div class="card-header">Wellness Tip</div>
    <p id="tip">Click below for a wellness tip ðŸŒ¿</p>
    <button onclick="showTip()">Get Tip</button>
  </div>

  <div class="card">
    <div class="card-header">Set Reminder</div>
    <label for="interval">Select Reminder Interval:</label>
    <select id="interval" onchange="toggleCustomInput()">
      <option value="60000">Every 1 Minute</option>
      <option value="300000" selected>Every 5 Minutes</option>
      <option value="600000">Every 10 Minutes</option>
      <option value="custom">Custom</option>
    </select>
    <br><br>
    <input type="number" id="customMinutes" placeholder="Enter minutes" style="display:none;">
    <br><br>
    <button id="reminderBtn" onclick="toggleReminder()">Start Reminder</button>
  </div>

  <div class="card">
    <div class="card-header">BMI Calculator</div>
    <input type="number" id="weight" placeholder="Enter weight (kg)"><br>
    <input type="number" id="height" placeholder="Enter height (cm)"><br>
    <button onclick="calculateBMI()">Calculate BMI</button>
    <p id="bmiResult">Your BMI will appear here.</p>
  </div>

  <div class="card">
    <div class="card-header">Team Members</div>
    <ul id="teamList"></ul>
  </div>

  <div class="card">
    <div class="card-header">Contact Us</div>
    <p>For any queries or feedback, reach out to us:</p>
    <a href="mailto:yourname@example.com" target="_blank">Click here to Email Us ðŸ“§</a>
  </div>

  <script>
    let glasses = 0;
    let goal = 8;
    let reminderInterval = null;

    const ctx = document.getElementById('hydrationChart');
    let hydrationChart = new Chart(ctx, {
      type: 'doughnut',
      data: { labels: ['Drank', 'Remaining'], datasets: [{ data: [0, goal], backgroundColor: ['#3498db', '#ecf0f1'], borderWidth: 1 }] },
      options: { plugins: { legend: { display: true } }, cutout: '70%' }
    });

    function updateChart(){ hydrationChart.data.datasets[0].data = [glasses, goal - glasses]; hydrationChart.update(); }
    function addGlass(){ if(glasses < goal){ glasses++; document.getElementById("progress").innerText = `Glasses Drank: ${glasses} / ${goal}`; updateChart(); } else { alert("Goal already reached for today! âœ…"); } }
    function showTip(){ const tips = ["Stand up and stretch your arms for 30 seconds.","Take 5 deep breaths to relax your body.","Roll your shoulders gently to release tension.","Do 10 squats to energize yourself.","Drink a glass of water right now! ðŸ’§"]; const randomTip = tips[Math.floor(Math.random() * tips.length)]; document.getElementById("tip").innerText = randomTip; }

    function toggleCustomInput() {
      const interval = document.getElementById("interval").value;
      const customInput = document.getElementById("customMinutes");
      if (interval === "custom") {
        customInput.style.display = "block";
      } else {
        customInput.style.display = "none";
      }
    }

    function toggleReminder() {
      const btn = document.getElementById('reminderBtn');

      if (reminderInterval) {
        clearInterval(reminderInterval);
        reminderInterval = null;
        btn.innerText = 'Start Reminder';
        alert('Reminder stopped.');
      } else {
        if (Notification.permission === "granted") {
          startReminder();
        } else if (Notification.permission !== "denied") {
          Notification.requestPermission().then(permission => {
            if (permission === "granted") {
              startReminder();
            } else {
              alert("Notifications are blocked. Please allow them in browser settings.");
            }
          });
        } else {
          alert("Notifications are blocked. Please enable them in browser settings.");
        }
      }
    }

    function startReminder() {
      const btn = document.getElementById('reminderBtn');
      let interval = document.getElementById('interval').value;

      if (interval === "custom") {
        let customValue = document.getElementById("customMinutes").value;
        if (!customValue || customValue <= 0) {
          alert("Please enter a valid custom time in minutes.");
          return;
        }
        interval = customValue * 60000; // convert minutes to ms
      }

      reminderInterval = setInterval(() => {
        // Play sound
        let audio = new Audio("https://www.soundjay.com/buttons/sounds/beep-07.mp3");
        audio.play();

        // Show notification
        new Notification("Hydration Reminder", {
          body: "Time to drink a glass of water! ðŸ’§",
          icon: "https://cdn-icons-png.flaticon.com/512/2913/2913461.png"
        });
      }, interval);

      btn.innerText = 'Stop Reminder';
      alert(`Reminder started! You'll get notifications every ${interval/60000} minutes with sound.`);
    }

    function calculateBMI(){ const weight = document.getElementById("weight").value; const height = document.getElementById("height").value; if(weight > 0 && height > 0){ const bmi = (weight / ((height/100) ** 2)).toFixed(2); let category = ""; if(bmi < 18.5) category = "Underweight"; else if(bmi < 24.9) category = "Normal weight"; else if(bmi < 29.9) category = "Overweight"; else category = "Obese"; document.getElementById("bmiResult").innerText = `BMI: ${bmi} (${category})`; } else { alert("Please enter valid weight and height!"); } }

    // Team members with default emoji
    const teamMembers = ["Afwan Saad Ahmed", "Aryan jeswal", "Aryan Singh", "Chanchal Kumar Sharma"];
    const teamList = document.getElementById("teamList");
    teamList.innerHTML = "";
    teamMembers.forEach(name => {
      const li = document.createElement("li");
      li.textContent = name;
      teamList.appendChild(li);
    });

    // initialize chart
    updateChart();

    // Register service worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').then(() => { console.log('Service Worker registered!'); });
      });
    }
  </script>
</body>
</html>
